<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stick text made with ❤️ by Pritam</title>
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      .section-gradient-text {
        background-color: #000;
        height: 260vh;
        cursor: pointer;
      }

      .section-gradient-text__sticky-box {
        justify-content: center;
        align-items: center;
        height: 100vh;
        display: flex;
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        overflow: hidden;
      }

      .gradient-cotainer {
        background-color: #000;
        position: relative;
        overflow: hidden;
      }

      .gradient {
        height: 260vh;
        position: absolute;
        top: 0%;
        bottom: 0%;
        left: 0%;
        right: 0%;
        background-image: linear-gradient(
          #000 12%,
          #351073 26%,
          #c958de 38%,
          #fbb1f7 50%,
          #c958de 64%,
          #351073 76%,
          #000 88%
        );
        mix-blend-mode: darken;
        will-change: transform;
        transform-style: preserve-3d;
        transform: translate3d(0px, 0%, 0px) scale3d(1, 1, 1) rotateX(0deg)
          rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);
      }

      .gradient-text {
        background-color: #000;
        height: 100%;
        position: absolute;
        top: auto;
        bottom: -100%;
        left: 0%;
        right: 0%;
      }

      .text {
        color: white;
      }

      .h-100vh {
        height: 100vh;
        text-align: center;
        padding: 4rem;
        background: rgb(233, 166, 166);
      }
    </style>
  </head>
  <body>
    <div class="h-100vh">Scroll to see the effect</div>

    <section class="section-gradient-text" onclick="changeText()">
      <div class="section-gradient-text__sticky-box">
        <div class="gradient-cotainer">
          <div class="gradient">
            <div class="gradient-text"></div>
          </div>
          <p class="text" contenteditable="true">Made with ❤️ by Pritam</p>
        </div>
      </div>
    </section>
    <div class="h-100vh"></div>

    <script>
      const main = document.querySelector(".section-gradient-text");
      let mainTop = main.getBoundingClientRect().top;
      const gradient = document.querySelector(".gradient");
      const text = document.querySelector(".text");

      mainTop = mainTop + window.scrollY;

      loadTextColor();

      window.addEventListener("scroll", () => {
        const scrollY = Math.round(window.scrollY);

        let scrollInsideElement = Math.round(scrollY - mainTop);
        const translateY = Math.min(100, scrollInsideElement * 0.1);
        console.log({ scrollY, translateY, scrollInsideElement });
        if (scrollInsideElement > 0) {
          gradient.style.transform = `translate3d(0px, -${translateY}%, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg)`;
        }
      });

      function loadTextColor() {
        const scrollY = window.scrollY;

        let scrollInsideElement = scrollY - mainTop;
        const translateY = Math.min(100, scrollInsideElement * 0.1); // Limits translateY to 100%
        console.log({ scrollY, translateY, scrollInsideElement });
        if (scrollInsideElement > 0) {
          gradient.style.transform = `translate3d(0px, -${translateY}%, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg)`;
        }
      }

      function changeText() {
        let newText = prompt("Change text to");
        if (newText) {
          text.textContent = newText;
        }
      }
    </script>
  </body>
</html>

